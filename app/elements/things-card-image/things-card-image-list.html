<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="things-card-image.html">

<dom-module id="things-card-image-list">
	<template>
		<things-ajax
			auto
      id="label-search"
      method="GET"
      resource-url="[[searchUrl]]"
      last-response="{{lastResponse}}">
		</things-ajax>
		
		<template id="card-list" is="dom-repeat" items="[[lastResponse]]">
			<things-card-image
				heading="[[item.name]]"
				image="[[item.thumbnail]]"
				description="[[item.description]]"
				field-array="[[fieldArray]]"
				detail-obj="[[item]]">
			</things-card-image>
		</template>

		<button on-tap="showTest">+</button>

	</template>

	<script>
		Polymer({
			is: 'things-card-image-list',

			properties: {
				searchUrl: {
					type: String,
					value: '/labels'
				},

				lastResponse: {
					type: Object
				},

				detailFields: {
					type: String,
					observer: 'detailFieldChanged'
				},

				fieldArray: {
					type: Array
				}
			},

			detailFieldChanged: function(fields) {
				this.fieldArray = fields.split(",");
			},


			showTest: function() {
				console.log(this.detailFields);
				console.log(this.detailArray);
			}
		});
	</script>
</dom-module>