<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../../../bower_components/iron-selector/iron-selectable.html">
<link rel="import" href="../../../bower_components/paper-card/paper-card.html">

<link rel="import" href="../../../../bower_components/things-ajax/things-ajax.html">
<link rel="import" href="../../../../bower_components/things-detail/things-detail-tab-view-behavior.html">
<!--
A comment describing this element

Example:

    <my-elem></my-elem>

Example:

    <my-elem>
      <h2>Hello my-elem</h2>
    </my-elem>

@demo demo/index.html
-->
<dom-module id="things-detail-layout-l1-r2">
    <template>
        <style>
        :host {
            display: inline-block;
            @apply(--things-detail-layout-l1-r2);
            @apply(--layout-horizontal);
        }
        

        paper-card {
            @apply(--layout-vertical);
            @apply(--layout-flex);
            @apply(--layout-wrap);
            @apply(--things-detail-layout-l1-r2-container);
            --paper-card-header-text: {
            	font-size: 14px;
            	@apply(--things-detail-header-text);
            };
        }

        .container {
            @apply(--things-detail-layout-l1-r2);
            @apply(--layout-flex);
            @apply(--layout-horizontal);
        }

        .detail-flex {
            @apply(--layout-flex);
        }
        
        .card-content {
        	@apply(--layout-flex);
            @apply(--layout-vertical);
           	overflow: auto;
        }

        .card-actions {
            @apply(--layout-horizontal-reverse);
        }
        
        #left {
            @apply(--layout-flex);
            @apply(--layout-vertical);
            @apply(--things-detail-layout-l1-r2-left);
        }
        
        #right {
            @apply(--layout-flex);
            @apply(--layout-vertical);
            @apply(--things-detail-layout-l1-r2-right);
        }
        
        #right-top {
            @apply(--layout-flex-4);
            @apply(--things-detail-layout-l1-r2-right-top);
        }
        
        #right-bottom {
            @apply(--layout-flex-3);
            @apply(--things-detail-layout-l1-r2-right-bottom);
        }
        </style>

        	<div class ="container">
				<!-- left -->
	            <paper-card id="left" 
	            	heading="[[title1]]" 
	            	elevation="0" 
	            	animated-shadow="false">

		                <div id="leftContent" class="card-content">

		                </div>
	            </paper-card>

	            <!-- right -->
	            <div id="right">
		            <paper-card id="right-top" 
		            	heading="[[title2]]" 
		            	elevation="0" 
		            	animated-shadow="false">
			                <div id="rightTopContent" class="card-content">

			                </div>
			                <div class="card-actions">
			                    <things-button-bar buttons="[[rightTopButtons]]">
			                    </things-buttons>
			                </div>
		            </paper-card>

	        	    <paper-card id="right-bottom" 
	        	    	heading="[[title3]]" 
	        	    	image="" 
	        	    	elevation="0" 
	        	    	animated-shadow="false">
		                    <div id="rightBottomContent" class="card-content">

		                    </div>
	                </paper-card>
                </div>
            </div>
    </template>
    <script>
    (function() {
        'use strict';

        Polymer({
            is: 'things-detail-layout-l1-r2',
            properties: {
                sections:{
                    type: Array,
                    observer : '_createSection'
                },
                
                contents:{
                    type: Array
                },

                title1:{
                    type: String
                },

                title2:{
                    type: String
                },

                title3:{
                    type: String
                }

            },

            behaviors: [
                Things.DetailTabViewBahavior,
                Polymer.IronSelectableBehavior,
                Polymer.IronResizableBehavior,
            ],
            ready : function(){
                this.set('contents', Polymer.dom(this.root).querySelectorAll('.card-content'));
                console.log(this.contents);
                this._createSection();
            },

            _createSection : function(){
                if(!this.sections || this.sections.length <= 0 ) return;

                this.contents.forEach(function(content,index){
                    var child = this.sections[index];
                    if(child){
                        child.element = document.createElement(child.elementName);
                        child.element = this._makeAttributes(child.element, child.attributes);
                        content.appendChild(child.element);
                        this.set('title'+(index+1),child.title);
                    }
                }.bind(this));
            },

            _makeAttributes : function(element, attrs){
                var attr;
                for(index in attrs) {
                    attr = attrs[index];
                    element.setAttribute(attr.name, attr.value);
                }
                return element;
            }


        });
    })();
    </script>
</dom-module>
